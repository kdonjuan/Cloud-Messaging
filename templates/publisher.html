<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Publisher UI</title>
</head>
<body>
<div class="container">
<h2>Publish a Message</h2>
<input type="text" id="itemId" placeholder="Item ID"><br>
<input type="text" id="location" placeholder="Location"><br>
<input type="text" id="quantity" placeholder="Quantity"><br>
<input type="text" id="status" placeholder="Status"><br>
<input type="text" id="datetime" placeholder="Transaction DateTime (ISO)"><br>
<button onclick="publish()">Publish</button>
<p id="statusText"></p>
</div>
 
  <script>
    async function publish() {
      const message = {
        TransactionNumber: crypto.randomUUID(),
        ItemId: document.getElementById("itemId").value,
        Location: document.getElementById("location").value,
        Quantity: parseInt(document.getElementById("quantity").value),
        Status: document.getElementById("status").value,
        TransactionDateTime: document.getElementById("datetime").value
      };
 
      const response = await fetch("http://localhost:5001/publish", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(message)
      });
 
      const status = document.getElementById("statusText");
      if (response.ok) {
        status.textContent = "✅ Message published!";
        status.style.color = "green";
      } else {
        const result = await response.json();
        status.textContent = "❌ " + (result.error || "Unknown error");
        status.style.color = "red";
      }
    }
</script>
</body>
</html>
